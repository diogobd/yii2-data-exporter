{
    "description": "Orders data export",
    "serializer": "leandrogehlen\\exporter\\data\\serializers\\ColumnSerializer",
    "charDelimiter": "|",
    "sessions": [
        {
            "name": "order",
            "providerName": "order-provider",
            "columns": [
                {"name": "type", "value": "010"},
                {"name": "number"},
                {"name": "create_at", "expression": "return date_format(date_create($value), 'Y-m-d');"},
                {"name": "person"},
                {"name": "description"}
            ],
            "sessions": [
                {
                    "name" : "items",
                    "providerName": "detail-provider",
                    "columns": [
                        {"name": "type", "value": "020"},
                        {"name": "product_id"},
                        {"name": "quantity"},
                        {"name": "price"},
                        {"name": "total"}
                    ]
                }
            ]
        }
    ],
    "providers": [
        {
            "name": "order-provider",
            "query": "select invoice.*, person.firstName as person from invoice join person on (person.id = invoice.person_id)"
        },{
            "name": "detail-provider",
            "query": "select * from invoice_details where invoice_id = :id"
        }
    ]
}